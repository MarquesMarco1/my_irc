{"ast":null,"code":"// src/ChatForm.js\nimport React,{useState,useEffect}from'react';import io from'socket.io-client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io('http://localhost:3000');const ChatForm=_ref=>{let{username,channel}=_ref;const[message,setMessage]=useState('');const[messages,setMessages]=useState([]);const[members,setMembers]=useState([]);useEffect(()=>{socket.emit('join channel',{username,channel});socket.on('chat message',msg=>{if(msg.channel===channel){setMessages(prevMessages=>[...prevMessages,msg]);}});socket.on('update members',members=>{setMembers(members);});return()=>{socket.emit('leave channel',{username,channel});socket.off();};},[channel,username]);const handleSubmit=e=>{e.preventDefault();if(message){socket.emit('chat message',{username,channel,message});setMessage('');}};const handleToggle=e=>{e.preventDefault();if(socket.connected){socket.disconnect();}else{socket.connect();socket.emit('join channel',{username,channel});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"channel\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Channel: \",/*#__PURE__*/_jsx(\"span\",{id:\"currentChannel\",children:channel})]})}),/*#__PURE__*/_jsx(\"ul\",{id:\"messages\",children:messages.map((msg,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[msg.username,\": \",msg.message]},index))}),/*#__PURE__*/_jsxs(\"form\",{id:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{id:\"input\",autoComplete:\"off\",value:message,onChange:e=>setMessage(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Envoyer\"}),/*#__PURE__*/_jsx(\"button\",{id:\"toggle-btn\",onClick:handleToggle,children:\"D\\xE9connecter\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"members\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Membres: \",/*#__PURE__*/_jsx(\"span\",{children:username})]}),/*#__PURE__*/_jsx(\"ul\",{id:\"membersList\",children:members.map((member,index)=>/*#__PURE__*/_jsx(\"li\",{children:member},index))})]})]});};export default ChatForm;","map":{"version":3,"names":["React","useState","useEffect","io","jsx","_jsx","jsxs","_jsxs","socket","ChatForm","_ref","username","channel","message","setMessage","messages","setMessages","members","setMembers","emit","on","msg","prevMessages","off","handleSubmit","e","preventDefault","handleToggle","connected","disconnect","connect","children","id","map","index","onSubmit","autoComplete","value","onChange","target","type","onClick","member"],"sources":["/home/wac/delivery/irc/irc-client/src/chatForm.js"],"sourcesContent":["// src/ChatForm.js\nimport React, { useState, useEffect } from 'react';\nimport io from 'socket.io-client';\n\nconst socket = io('http://localhost:3000');\n\nconst ChatForm = ({ username, channel }) => {\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [members, setMembers] = useState([]);\n\n  useEffect(() => {\n    socket.emit('join channel', { username, channel });\n\n    socket.on('chat message', (msg) => {\n      if (msg.channel === channel) {\n        setMessages((prevMessages) => [...prevMessages, msg]);\n      }\n    });\n\n    socket.on('update members', (members) => {\n      setMembers(members);\n    });\n\n    return () => {\n      socket.emit('leave channel', { username, channel });\n      socket.off();\n    };\n  }, [channel, username]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (message) {\n      socket.emit('chat message', { username, channel, message });\n      setMessage('');\n    }\n  };\n\n  const handleToggle = (e) => {\n    e.preventDefault();\n    if (socket.connected) {\n      socket.disconnect();\n    } else {\n      socket.connect();\n      socket.emit('join channel', { username, channel });\n    }\n  };\n\n  return (\n    <div>\n      <div id=\"channel\">\n        <span>Channel: <span id=\"currentChannel\">{channel}</span></span>\n      </div>\n      <ul id=\"messages\">\n        {messages.map((msg, index) => (\n          <li key={index}>{msg.username}: {msg.message}</li>\n        ))}\n      </ul>\n      <form id=\"form\" onSubmit={handleSubmit}>\n        <input \n          id=\"input\" \n          autoComplete=\"off\" \n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n        />\n        <button type=\"submit\">Envoyer</button>\n        <button id=\"toggle-btn\" onClick={handleToggle}>DÃ©connecter</button>\n      </form>\n      <div id=\"members\">\n      <span>Membres: <span>{username}</span></span>\n        <ul id=\"membersList\">\n          {members.map((member, index) => (\n            <li key={index}>{member}</li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}